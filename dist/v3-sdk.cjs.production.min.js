"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("@uniswap/sdk-core"),n=e(require("jsbi")),i=e(require("tiny-invariant")),r=require("@project-serum/anchor"),a=require("@ethersproject/solidity"),o=require("@ethersproject/abi"),u=require("@uniswap/v3-periphery/artifacts/contracts/interfaces/IMulticall.sol/IMulticall.json"),s=require("@uniswap/v3-periphery/artifacts/contracts/NonfungiblePositionManager.sol/NonfungiblePositionManager.json"),c=require("@uniswap/v3-periphery/artifacts/contracts/interfaces/ISelfPermit.sol/ISelfPermit.json"),m=require("@uniswap/v3-periphery/artifacts/contracts/interfaces/IPeripheryPaymentsWithFee.sol/IPeripheryPaymentsWithFee.json"),p=require("@uniswap/v3-periphery/artifacts/contracts/lens/Quoter.sol/Quoter.json"),l=require("@uniswap/v3-staker/artifacts/contracts/UniswapV3Staker.sol/UniswapV3Staker.json"),d=require("@uniswap/v3-periphery/artifacts/contracts/SwapRouter.sol/SwapRouter.json");function f(e,t,n,i,r,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(i,r)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){f(a,i,r,o,u,"next",e)}function u(e){f(a,i,r,o,u,"throw",e)}o(void 0)}))}}function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function S(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return v(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var A,x,T,w=(function(e){var t=function(e){var t=Object.prototype,n=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},r=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,i){var r=Object.create((t&&t.prototype instanceof p?t:p).prototype),a=new T(i||[]);return r._invoke=function(e,t,n){var i="suspendedStart";return function(r,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw a;return{value:void 0,done:!0}}for(n.method=r,n.arg=a;;){var o=n.delegate;if(o){var u=S(o,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var s=c(e,t,n);if("normal"===s.type){if(i=n.done?"completed":"suspendedYield",s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i="completed",n.method="throw",n.arg=s.arg)}}}(e,n,a),r}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var m={};function p(){}function l(){}function d(){}var f={};u(f,r,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(w([])));y&&y!==t&&n.call(y,r)&&(f=y);var h=d.prototype=p.prototype=Object.create(f);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function v(e,t){var i;this._invoke=function(r,a){function o(){return new t((function(i,o){!function i(r,a,o,u){var s=c(e[r],e,a);if("throw"!==s.type){var m=s.arg,p=m.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(p).then((function(e){m.value=e,o(m)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}(r,a,i,o)}))}return i=i?i.then(o,o):o()}}function S(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=c(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,m;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function w(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:M}}function M(){return{value:void 0,done:!0}}return l.prototype=d,u(h,"constructor",d),u(d,"constructor",l),l.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===l||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},k(v.prototype),u(v.prototype,a,(function(){return this})),e.AsyncIterator=v,e.async=function(t,n,i,r,a){void 0===a&&(a=Promise);var o=new v(s(t,n,i,r),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(h),u(h,o,"Generator"),u(h,r,(function(){return this})),u(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=w,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return o.type="throw",o.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;x(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:w(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(T={exports:{}}),T.exports),M="0x0000000000000000000000000000000000000000";(x=exports.FeeAmount||(exports.FeeAmount={}))[x.LOWEST=100]="LOWEST",x[x.LOW=500]="LOW",x[x.MEDIUM=3e3]="MEDIUM",x[x.HIGH=1e4]="HIGH";var I=((A={})[exports.FeeAmount.LOWEST]=1,A[exports.FeeAmount.LOW]=10,A[exports.FeeAmount.MEDIUM]=60,A[exports.FeeAmount.HIGH]=200,A),b=n.BigInt(-1),q=n.BigInt(0),P=n.BigInt(1),E=n.exponentiate(n.BigInt(2),n.BigInt(32)),R=n.exponentiate(n.BigInt(2),n.BigInt(64)),C=n.subtract(E,P),O=n.subtract(R,P),N=n.BigInt(32),L=r.web3.PublicKey,F=Buffer.from("p");function _(e){var t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e,!1),new Uint8Array(t)}function D(e){var t=e.tokenA,n=e.tokenB,i=e.fee,r=t.sortsBefore(n)?[t,n]:[n,t],a=r[1],o=new L(r[0].address),u=new L(a.address);return L.findProgramAddress([F,o.toBuffer(),u.toBuffer(),_(i)],new L("9qe9svzmigVAvWh2qX9AJq3p4N9QbTyx2yRCfN1aAZam")).then((function(e){return e[0].toString()}))}var U=function(){function e(){}return e.addDelta=function(e,t){return n.lessThan(t,q)?n.subtract(e,n.multiply(t,b)):n.add(e,t)},e}(),X=function(){function e(){}return e.mulDivRoundingUp=function(e,t,i){var r=n.multiply(e,t),a=n.divide(r,i);return n.notEqual(n.remainder(r,i),q)&&(a=n.add(a,P)),a},e.mulDivFloor=function(e,t,r){n.notEqual(r,q)||i(!1);var a=n.multiply(e,t);return n.divide(a,r)},e.mulDivCeil=function(e,t,r){n.notEqual(r,q)||i(!1);var a=n.multiply(e,t);return n.divide(n.add(a,n.subtract(r,P)),r)},e}();function B(e,i){var r=n.multiply(e,i);return n.bitwiseAnd(r,t.MaxUint128)}var K=function(){function e(){}return e.getAmount0Delta=function(e,t,r,a){if(n.greaterThan(e,t)){var o=[t,e];e=o[0],t=o[1]}var u=n.leftShift(r,N),s=n.subtract(t,e);return n.greaterThan(e,q)||i(!1),a?X.mulDivRoundingUp(X.mulDivCeil(u,s,t),P,e):n.divide(X.mulDivFloor(u,s,t),e)},e.getAmount1Delta=function(e,t,i,r){if(n.greaterThan(e,t)){var a=[t,e];e=a[0],t=a[1]}return r?X.mulDivCeil(i,n.subtract(t,e),E):X.mulDivFloor(i,n.subtract(t,e),E)},e.getNextSqrtPriceFromInput=function(e,t,r,a){return n.greaterThan(e,q)||i(!1),n.greaterThan(t,q)||i(!1),a?this.getNextSqrtPriceFromAmount0RoundingUp(e,t,r,!0):this.getNextSqrtPriceFromAmount1RoundingDown(e,t,r,!0)},e.getNextSqrtPriceFromOutput=function(e,t,r,a){return n.greaterThan(e,q)||i(!1),n.greaterThan(t,q)||i(!1),a?this.getNextSqrtPriceFromAmount1RoundingDown(e,t,r,!1):this.getNextSqrtPriceFromAmount0RoundingUp(e,t,r,!1)},e.getNextSqrtPriceFromAmount0RoundingUp=function(e,r,a,o){if(n.equal(a,q))return e;var u=n.leftShift(r,N);if(o){var s=B(a,e),c=(p=n.add(u,s),n.bitwiseAnd(p,t.MaxUint128));return n.greaterThanOrEqual(c,u)?X.mulDivCeil(u,e,c):X.mulDivRoundingUp(u,P,n.add(n.divide(u,e),a))}var m=B(a,e);n.greaterThan(u,m)||i(!1);var p,l=n.subtract(u,m);return X.mulDivCeil(u,e,l)},e.getNextSqrtPriceFromAmount1RoundingDown=function(e,t,r,a){if(a){var o=n.lessThanOrEqual(r,C)?n.divide(n.leftShift(r,N),t):X.mulDivFloor(r,E,t);return n.add(e,o)}var u=n.lessThanOrEqual(r,C)?X.mulDivRoundingUp(n.leftShift(r,N),P,t):X.mulDivCeil(r,E,t);return n.greaterThan(e,u)||i(!1),n.subtract(e,u)},e}(),W=n.exponentiate(n.BigInt(10),n.BigInt(6)),j=function(){function e(){}return e.computeSwapStep=function(e,t,i,r,a){var o={},u=n.greaterThanOrEqual(e,t),s=n.greaterThanOrEqual(r,q);if(s){var c=X.mulDivFloor(r,n.subtract(W,n.BigInt(a)),W);o.amountIn=u?K.getAmount0Delta(t,e,i,!0):K.getAmount1Delta(e,t,i,!0),o.sqrtRatioNextX32=n.greaterThanOrEqual(c,o.amountIn)?t:K.getNextSqrtPriceFromInput(e,i,c,u)}else o.amountOut=u?K.getAmount1Delta(t,e,i,!1):K.getAmount0Delta(e,t,i,!1),o.sqrtRatioNextX32=n.greaterThanOrEqual(n.multiply(r,b),o.amountOut)?t:K.getNextSqrtPriceFromOutput(e,i,n.multiply(r,b),u);var m=n.equal(t,o.sqrtRatioNextX32);return u?(o.amountIn=m&&s?o.amountIn:K.getAmount0Delta(o.sqrtRatioNextX32,e,i,!0),o.amountOut=m&&!s?o.amountOut:K.getAmount1Delta(o.sqrtRatioNextX32,e,i,!1)):(o.amountIn=m&&s?o.amountIn:K.getAmount1Delta(e,o.sqrtRatioNextX32,i,!0),o.amountOut=m&&!s?o.amountOut:K.getAmount0Delta(e,o.sqrtRatioNextX32,i,!1)),!s&&n.greaterThan(o.amountOut,n.multiply(r,b))&&(o.amountOut=n.multiply(r,b)),o.feeAmount=s&&n.notEqual(o.sqrtRatioNextX32,t)?n.subtract(r,o.amountIn):X.mulDivCeil(o.amountIn,n.BigInt(a),n.subtract(W,n.BigInt(a))),[o.sqrtRatioNextX32,o.amountIn,o.amountOut,o.feeAmount]},e}(),G=n.BigInt(2),z=[32,16,8,4,2,1].map((function(e){return[e,n.exponentiate(G,n.BigInt(e))]}));function H(e){n.greaterThan(e,q)||i(!1),n.lessThanOrEqual(e,t.MaxUint128)||i(!1);for(var r,a=0,o=S(z);!(r=o()).done;){var u=r.value,s=u[0];n.greaterThanOrEqual(e,u[1])&&(e=n.signedRightShift(e,n.BigInt(s)),a+=s)}return a}function V(e,t){return n.signedRightShift(n.multiply(e,n.BigInt(t)),n.BigInt(64))}var Q=n.exponentiate(n.BigInt(2),n.BigInt(32)),Y=function(){function e(){}return e.getSqrtRatioAtTick=function(r){r>=e.MIN_TICK&&r<=e.MAX_TICK&&Number.isInteger(r)||i(!1);var a=r<0?-1*r:r,o=n.BigInt(0!=(1&a)?"0xfffcb933bd6fb800":"0x10000000000000000");return 0!=(2&a)&&(o=V(o,"0xfff97272373d4000")),0!=(4&a)&&(o=V(o,"0xfff2e50f5f657000")),0!=(8&a)&&(o=V(o,"0xffe5caca7e10f000")),0!=(16&a)&&(o=V(o,"0xffcb9843d60f7000")),0!=(32&a)&&(o=V(o,"0xff973b41fa98e800")),0!=(64&a)&&(o=V(o,"0xff2ea16466c9b000")),0!=(128&a)&&(o=V(o,"0xfe5dee046a9a3800")),0!=(256&a)&&(o=V(o,"0xfcbe86c7900bb000")),0!=(512&a)&&(o=V(o,"0xf987a7253ac65800")),0!=(1024&a)&&(o=V(o,"0xf3392b0822bb6000")),0!=(2048&a)&&(o=V(o,"0xe7159475a2caf000")),0!=(4096&a)&&(o=V(o,"0xd097f3bdfd2f2000")),0!=(8192&a)&&(o=V(o,"0xa9f746462d9f8000")),0!=(16384&a)&&(o=V(o,"0x70d869a156f31c00")),0!=(32768&a)&&(o=V(o,"0x31be135f97ed3200")),0!=(65536&a)&&(o=V(o,"0x9aa508b5b85a500")),0!=(131072&a)&&(o=V(o,"0x5d6af8dedc582c")),r>0&&(o=n.divide(t.MaxUint128,o)),n.greaterThan(n.remainder(o,Q),q)?n.add(n.divide(o,Q),P):n.divide(o,Q)},e.getTickAtSqrtRatio=function(t){n.greaterThanOrEqual(t,e.MIN_SQRT_RATIO)&&n.lessThan(t,e.MAX_SQRT_RATIO)||i(!1);var r,a=t,o=H(a);r=n.greaterThanOrEqual(n.BigInt(o),n.BigInt(32))?n.signedRightShift(a,n.BigInt(o-31)):n.leftShift(a,n.BigInt(31-o));for(var u=n.leftShift(n.subtract(n.BigInt(o),n.BigInt(32)),n.BigInt(16)),s=0;s<14;s++){r=n.signedRightShift(n.multiply(r,r),n.BigInt(31));var c=n.signedRightShift(r,n.BigInt(32));u=n.bitwiseOr(u,n.leftShift(c,n.BigInt(15-s))),r=n.signedRightShift(r,c)}var m=n.multiply(u,n.BigInt("908567298")),p=n.toNumber(n.signedRightShift(n.subtract(m,n.BigInt("42949672")),n.BigInt(32))),l=n.toNumber(n.signedRightShift(n.add(m,n.BigInt("3677218864")),n.BigInt(32)));return p===l?p:n.lessThanOrEqual(e.getSqrtRatioAtTick(l),t)?l:p},e}();Y.MIN_TICK=-221818,Y.MAX_TICK=-Y.MIN_TICK,Y.MIN_SQRT_RATIO=n.BigInt("65537"),Y.MAX_SQRT_RATIO=n.BigInt("281472331703918");var Z=function(){function e(){}var t=e.prototype;return t.getTickAddress=function(e){throw new Error("Method not implemented.")},t.getTick=function(){var t=g(w.mark((function t(n){return w.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error(e.ERROR_MESSAGE);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.nextInitializedTickWithinOneWord=function(){var t=g(w.mark((function t(n,i,r){return w.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error(e.ERROR_MESSAGE);case 1:case"end":return t.stop()}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}(),e}();Z.ERROR_MESSAGE="No tick data provider was given";var J=new Z,$=function(){function e(e,t,r,a,o,u,s){void 0===s&&(s=J),Number.isInteger(r)&&r<1e6||i(!1);var c=Y.getSqrtRatioAtTick(u),m=Y.getSqrtRatioAtTick(u+1);n.greaterThanOrEqual(n.BigInt(a),c)&&n.lessThanOrEqual(n.BigInt(a),m)||i(!1);var p=e.sortsBefore(t)?[e,t]:[t,e];this.token0=p[0],this.token1=p[1],this.fee=r,this.sqrtRatioX32=n.BigInt(a),this.liquidity=n.BigInt(o),this.tickCurrent=u,this.tickDataProvider=s}e.getAddress=function(e,t,n,i){return D({factoryAddress:"0x1F98431c8aD98523631AE4a59f267346ea31F984",fee:n,tokenA:e,tokenB:t,initCodeHashManualOverride:i})};var r=e.prototype;return r.involvesToken=function(e){return e.equals(this.token0)||e.equals(this.token1)},r.priceOf=function(e){return this.involvesToken(e)||i(!1),e.equals(this.token0)?this.token0Price:this.token1Price},r.getOutputAmount=function(){var r=g(w.mark((function r(a,o){var u,s,c,m,p,l;return w.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return this.involvesToken(a.currency)||i(!1),u=a.currency.equals(this.token0),r.next=4,this.swap(u,a.quotient,o);case 4:return c=(s=r.sent).sqrtRatioX32,m=s.liquidity,p=s.tickCurrent,l=s.accounts,r.abrupt("return",[t.CurrencyAmount.fromRawAmount(u?this.token1:this.token0,n.multiply(s.amountCalculated,b)),new e(this.token0,this.token1,this.fee,c,m,p,this.tickDataProvider),l]);case 12:case"end":return r.stop()}}),r,this)})));return function(e,t){return r.apply(this,arguments)}}(),r.getInputAmount=function(){var r=g(w.mark((function r(a,o){var u,s,c,m,p;return w.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a.currency.isToken&&this.involvesToken(a.currency)||i(!1),u=a.currency.equals(this.token1),r.next=4,this.swap(u,n.multiply(a.quotient,b),o);case 4:return c=(s=r.sent).sqrtRatioX32,m=s.liquidity,p=s.tickCurrent,r.abrupt("return",[t.CurrencyAmount.fromRawAmount(u?this.token0:this.token1,s.amountCalculated),new e(this.token0,this.token1,this.fee,c,m,p,this.tickDataProvider)]);case 11:case"end":return r.stop()}}),r,this)})));return function(e,t){return r.apply(this,arguments)}}(),r.swap=function(){var e=g(w.mark((function e(t,r,a){var o,u,s,c,m,p,l,d,f;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.notEqual(r,q)||i(!1),a||(a=t?n.add(Y.MIN_SQRT_RATIO,P):n.subtract(Y.MAX_SQRT_RATIO,P)),t?(n.greaterThan(a,Y.MIN_SQRT_RATIO)||i(!1),n.lessThan(a,this.sqrtRatioX32)||i(!1)):(n.lessThan(a,Y.MAX_SQRT_RATIO)||i(!1),n.greaterThan(a,this.sqrtRatioX32)||i(!1)),o=n.greaterThanOrEqual(r,q),u={amountSpecifiedRemaining:r,amountCalculated:q,sqrtPriceX32:this.sqrtRatioX32,tick:this.tickCurrent,accounts:[],liquidity:this.liquidity};case 5:if(!(n.notEqual(u.amountSpecifiedRemaining,q)&&u.sqrtPriceX32!=a&&u.tick<Y.MAX_TICK&&u.tick>Y.MIN_TICK)){e.next=48;break}return(c={}).sqrtPriceStartX32=u.sqrtPriceX32,e.next=10,this.tickDataProvider.nextInitializedTickWithinOneWord(u.tick,t,this.tickSpacing);case 10:if(c.tickNext=(m=e.sent)[0],c.initialized=m[1],l=m[4],s!==(p=m[2])&&(u.accounts.push({pubkey:l,isWritable:!1,isSigner:!1}),s=p),c.tickNext<Y.MIN_TICK?c.tickNext=Y.MIN_TICK:c.tickNext>Y.MAX_TICK&&(c.tickNext=Y.MAX_TICK),c.sqrtPriceNextX32=Y.getSqrtRatioAtTick(c.tickNext),d=j.computeSwapStep(u.sqrtPriceX32,(t?n.lessThan(c.sqrtPriceNextX32,a):n.greaterThan(c.sqrtPriceNextX32,a))?a:c.sqrtPriceNextX32,u.liquidity,u.amountSpecifiedRemaining,this.fee),u.sqrtPriceX32=d[0],c.amountIn=d[1],c.amountOut=d[2],c.feeAmount=d[3],o?(u.amountSpecifiedRemaining=n.subtract(u.amountSpecifiedRemaining,n.add(c.amountIn,c.feeAmount)),u.amountCalculated=n.subtract(u.amountCalculated,c.amountOut)):(u.amountSpecifiedRemaining=n.add(u.amountSpecifiedRemaining,c.amountOut),u.amountCalculated=n.add(u.amountCalculated,n.add(c.amountIn,c.feeAmount))),!n.equal(u.sqrtPriceX32,c.sqrtPriceNextX32)){e.next=45;break}if(!c.initialized){e.next=41;break}return e.t0=u.accounts,e.next=29,this.tickDataProvider.getTickAddress(c.tickNext);case 29:return e.t1=e.sent,e.t2={pubkey:e.t1,isWritable:!0,isSigner:!1},e.t0.push.call(e.t0,e.t2),e.t3=n,e.next=35,this.tickDataProvider.getTick(c.tickNext);case 35:e.t4=e.sent.liquidityNet,f=e.t3.BigInt.call(e.t3,e.t4),t&&(f=n.multiply(f,b)),u.liquidity=U.addDelta(u.liquidity,f),e.next=42;break;case 41:console.log("reached uninitialized tick",c.tickNext);case 42:u.tick=t?c.tickNext-1:c.tickNext,e.next=46;break;case 45:u.sqrtPriceX32!=c.sqrtPriceStartX32&&(u.tick=Y.getTickAtSqrtRatio(u.sqrtPriceX32));case 46:e.next=5;break;case 48:return e.abrupt("return",{amountCalculated:u.amountCalculated,sqrtRatioX32:u.sqrtPriceX32,liquidity:u.liquidity,tickCurrent:u.tick,accounts:u.accounts});case 49:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}(),h(e,[{key:"token0Price",get:function(){var e;return null!=(e=this._token0Price)?e:this._token0Price=new t.Price(this.token0,this.token1,R,n.multiply(this.sqrtRatioX32,this.sqrtRatioX32))}},{key:"token1Price",get:function(){var e;return null!=(e=this._token1Price)?e:this._token1Price=new t.Price(this.token1,this.token0,n.multiply(this.sqrtRatioX32,this.sqrtRatioX32),R)}},{key:"chainId",get:function(){return this.token0.chainId}},{key:"tickSpacing",get:function(){return I[this.fee]}}]),e}();function ee(e){var t=n.BigInt(e).toString(16);return t.length%2!=0&&(t="0"+t),"0x"+t}function te(e,t){var n=e.pools.reduce((function(e,t,n){var i=e.inputToken,r=e.path,a=e.types,o=t.token0.equals(i)?t.token1:t.token0;return 0===n?{inputToken:o,types:["address","uint24","address"],path:[i.address,t.fee,o.address]}:{inputToken:o,types:[].concat(a,["uint24","address"]),path:[].concat(r,[t.fee,o.address])}}),{inputToken:e.input.wrapped,path:[],types:[]}),i=n.path,r=n.types;return t?a.pack(r.reverse(),i.reverse()):a.pack(r,i)}function ne(e,i){var r=n.leftShift(n.BigInt(e),n.BigInt(64)),a=n.BigInt(i),o=n.divide(r,a);return t.sqrt(o)}function ie(e,t){for(var n=0;n<e.length-1;n++)if(t(e[n],e[n+1])>0)return!1;return!0}function re(e,i,r){var a=Y.getSqrtRatioAtTick(r),o=n.multiply(a,a);return e.sortsBefore(i)?new t.Price(e,i,R,o):new t.Price(e,i,o,R)}function ae(e,t){return e.index-t.index}var oe=function(){function e(){}return e.validateList=function(e,t){t>0||i(!1),e.every((function(e){return e.index%t==0}))||i(!1),n.equal(e.reduce((function(e,t){return n.add(e,t.liquidityNet)}),q),q)||i(!1),ie(e,ae)||i(!1)},e.isBelowSmallest=function(e,t){return e.length>0||i(!1),t<e[0].index},e.isAtOrAboveLargest=function(e,t){return e.length>0||i(!1),t>=e[e.length-1].index},e.getTick=function(e,t){var n=e[this.binarySearch(e,t)];return n.index!==t&&i(!1),n},e.binarySearch=function(e,t){this.isBelowSmallest(e,t)&&i(!1);for(var n,r=0,a=e.length-1;;){if(e[n=Math.floor((r+a)/2)].index<=t&&(n===e.length-1||e[n+1].index>t))return n;e[n].index<t?r=n+1:a=n-1}},e.nextInitializedTick=function(t,n,r){return r?(e.isBelowSmallest(t,n)&&i(!1),e.isAtOrAboveLargest(t,n)?t[t.length-1]:t[this.binarySearch(t,n)]):(this.isAtOrAboveLargest(t,n)&&i(!1),this.isBelowSmallest(t,n)?t[0]:t[this.binarySearch(t,n)+1])},e.nextInitializedTickWithinOneWord=function(t,n,i,r){var a=Math.floor(n/r);if(i){var o=(a>>8<<8)*r;if(e.isBelowSmallest(t,n))return[o,!1];var u=e.nextInitializedTick(t,n,i).index,s=Math.max(o,u);return[s,s===u]}var c=(1+(a+1>>8)<<8)*r-1;if(this.isAtOrAboveLargest(t,n))return[c,!1];var m=this.nextInitializedTick(t,n,i).index,p=Math.min(c,m);return[p,p===m]},e}(),ue=Buffer.from("b"),se=Buffer.from("p"),ce=Buffer.from("ps"),me=Buffer.from("o"),pe=Buffer.from("t"),le=Buffer.from("f");function de(e,t,i){if(n.greaterThan(e,t)){var r=[t,e];e=r[0],t=r[1]}var a=X.mulDivFloor(e,t,C);return X.mulDivFloor(n.BigInt(i),a,n.subtract(t,e))}function fe(e,t,i){if(n.greaterThan(e,t)){var r=[t,e];e=r[0],t=r[1]}return X.mulDivFloor(n.BigInt(i),C,n.subtract(t,e))}function ge(e,t,i,r,a,o){if(n.greaterThan(t,i)){var u=[i,t];t=u[0],i=u[1]}var s=de;if(n.lessThanOrEqual(e,t))return s(t,i,r);if(n.lessThan(e,i)){var c=s(e,i,r),m=fe(t,e,a);return n.lessThan(c,m)?c:m}return fe(t,i,a)}var ye=function(){function e(e){var t=e.pool,r=e.liquidity,a=e.tickLower,o=e.tickUpper;this._token0Amount=null,this._token1Amount=null,this._mintAmounts=null,a<o||i(!1),a>=Y.MIN_TICK&&a%t.tickSpacing==0||i(!1),o<=Y.MAX_TICK&&o%t.tickSpacing==0||i(!1),this.pool=t,this.tickLower=a,this.tickUpper=o,this.liquidity=n.BigInt(r)}var r=e.prototype;return r.ratiosAfterSlippage=function(e){var i=this.pool.token0Price.asFraction.multiply(new t.Percent(1).subtract(e)),r=this.pool.token0Price.asFraction.multiply(e.add(1)),a=ne(i.numerator,i.denominator);n.lessThanOrEqual(a,Y.MIN_SQRT_RATIO)&&(a=n.add(Y.MIN_SQRT_RATIO,n.BigInt(1)));var o=ne(r.numerator,r.denominator);return n.greaterThanOrEqual(o,Y.MAX_SQRT_RATIO)&&(o=n.subtract(Y.MAX_SQRT_RATIO,n.BigInt(1))),{sqrtRatioX32Lower:a,sqrtRatioX32Upper:o}},r.mintAmountsWithSlippage=function(t){var n=this.ratiosAfterSlippage(t),i=n.sqrtRatioX32Upper,r=n.sqrtRatioX32Lower,a=new $(this.pool.token0,this.pool.token1,this.pool.fee,r,0,Y.getTickAtSqrtRatio(r)),o=new $(this.pool.token0,this.pool.token1,this.pool.fee,i,0,Y.getTickAtSqrtRatio(i)),u=e.fromAmounts(k({pool:this.pool,tickLower:this.tickLower,tickUpper:this.tickUpper},this.mintAmounts,{useFullPrecision:!1}));return{amount0:new e({pool:o,liquidity:u.liquidity,tickLower:this.tickLower,tickUpper:this.tickUpper}).mintAmounts.amount0,amount1:new e({pool:a,liquidity:u.liquidity,tickLower:this.tickLower,tickUpper:this.tickUpper}).mintAmounts.amount1}},r.burnAmountsWithSlippage=function(t){var n=this.ratiosAfterSlippage(t),i=n.sqrtRatioX32Upper,r=n.sqrtRatioX32Lower,a=new $(this.pool.token0,this.pool.token1,this.pool.fee,r,0,Y.getTickAtSqrtRatio(r)),o=new e({pool:new $(this.pool.token0,this.pool.token1,this.pool.fee,i,0,Y.getTickAtSqrtRatio(i)),liquidity:this.liquidity,tickLower:this.tickLower,tickUpper:this.tickUpper}).amount0,u=new e({pool:a,liquidity:this.liquidity,tickLower:this.tickLower,tickUpper:this.tickUpper}).amount1;return{amount0:o.quotient,amount1:u.quotient}},e.fromAmounts=function(t){var n=t.pool,i=t.tickLower,r=t.tickUpper,a=t.amount0,o=t.amount1,u=Y.getSqrtRatioAtTick(i),s=Y.getSqrtRatioAtTick(r);return new e({pool:n,tickLower:i,tickUpper:r,liquidity:ge(n.sqrtRatioX32,u,s,a,o)})},e.fromAmount0=function(t){return e.fromAmounts({pool:t.pool,tickLower:t.tickLower,tickUpper:t.tickUpper,amount0:t.amount0,amount1:O,useFullPrecision:t.useFullPrecision})},e.fromAmount1=function(t){return e.fromAmounts({pool:t.pool,tickLower:t.tickLower,tickUpper:t.tickUpper,amount0:O,amount1:t.amount1,useFullPrecision:!0})},h(e,[{key:"token0PriceLower",get:function(){return re(this.pool.token0,this.pool.token1,this.tickLower)}},{key:"token0PriceUpper",get:function(){return re(this.pool.token0,this.pool.token1,this.tickUpper)}},{key:"amount0",get:function(){return null===this._token0Amount&&(this._token0Amount=t.CurrencyAmount.fromRawAmount(this.pool.token0,this.pool.tickCurrent<this.tickLower?K.getAmount0Delta(Y.getSqrtRatioAtTick(this.tickLower),Y.getSqrtRatioAtTick(this.tickUpper),this.liquidity,!1):this.pool.tickCurrent<this.tickUpper?K.getAmount0Delta(this.pool.sqrtRatioX32,Y.getSqrtRatioAtTick(this.tickUpper),this.liquidity,!1):q)),this._token0Amount}},{key:"amount1",get:function(){return null===this._token1Amount&&(this._token1Amount=t.CurrencyAmount.fromRawAmount(this.pool.token1,this.pool.tickCurrent<this.tickLower?q:K.getAmount1Delta(Y.getSqrtRatioAtTick(this.tickLower),this.pool.tickCurrent<this.tickUpper?this.pool.sqrtRatioX32:Y.getSqrtRatioAtTick(this.tickUpper),this.liquidity,!1))),this._token1Amount}},{key:"mintAmounts",get:function(){return null===this._mintAmounts?this.pool.tickCurrent<this.tickLower?{amount0:K.getAmount0Delta(Y.getSqrtRatioAtTick(this.tickLower),Y.getSqrtRatioAtTick(this.tickUpper),this.liquidity,!0),amount1:q}:this.pool.tickCurrent<this.tickUpper?{amount0:K.getAmount0Delta(this.pool.sqrtRatioX32,Y.getSqrtRatioAtTick(this.tickUpper),this.liquidity,!0),amount1:K.getAmount1Delta(Y.getSqrtRatioAtTick(this.tickLower),this.pool.sqrtRatioX32,this.liquidity,!0)}:{amount0:q,amount1:K.getAmount1Delta(Y.getSqrtRatioAtTick(this.tickLower),Y.getSqrtRatioAtTick(this.tickUpper),this.liquidity,!0)}:this._mintAmounts}}]),e}(),he=function(){function e(e,t,n){this._midPrice=null,e.length>0||i(!1);var r=e[0].chainId;e.every((function(e){return e.chainId===r}))||i(!1);var a=t.wrapped;e[0].involvesToken(a)||i(!1),e[e.length-1].involvesToken(n.wrapped)||i(!1);for(var o,u=[a],s=S(e.entries());!(o=s()).done;){var c=o.value,m=c[1],p=u[c[0]];p.equals(m.token0)||p.equals(m.token1)||i(!1);var l=p.equals(m.token0)?m.token1:m.token0;u.push(l)}this.pools=e,this.tokenPath=u,this.input=t,this.output=null!=n?n:u[u.length-1]}return h(e,[{key:"chainId",get:function(){return this.pools[0].chainId}},{key:"midPrice",get:function(){if(null!==this._midPrice)return this._midPrice;var e=this.pools.slice(1).reduce((function(e,t){var n=e.price;return e.nextInput.equals(t.token0)?{nextInput:t.token1,price:n.multiply(t.token0Price)}:{nextInput:t.token0,price:n.multiply(t.token1Price)}}),this.pools[0].token0.equals(this.input.wrapped)?{nextInput:this.pools[0].token1,price:this.pools[0].token0Price}:{nextInput:this.pools[0].token0,price:this.pools[0].token1Price}).price;return this._midPrice=new t.Price(this.input,this.output,e.denominator,e.numerator)}}]),e}();function ke(e,t){return e.inputAmount.currency.equals(t.inputAmount.currency)||i(!1),e.outputAmount.currency.equals(t.outputAmount.currency)||i(!1),e.outputAmount.equalTo(t.outputAmount)?e.inputAmount.equalTo(t.inputAmount)?e.swaps.reduce((function(e,t){return e+t.route.tokenPath.length}),0)-t.swaps.reduce((function(e,t){return e+t.route.tokenPath.length}),0):e.inputAmount.lessThan(t.inputAmount)?-1:1:e.outputAmount.lessThan(t.outputAmount)?1:-1}var ve=function(){function e(e){var t=e.routes,n=e.tradeType,r=t[0].inputAmount.currency,a=t[0].outputAmount.currency;t.every((function(e){return r.wrapped.equals(e.route.input.wrapped)}))||i(!1),t.every((function(e){return a.wrapped.equals(e.route.output.wrapped)}))||i(!1),this.swaps=t,this.tradeType=n}e.exactIn=function(){var n=g(w.mark((function n(i,r){return w.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e.fromRoute(i,r,t.TradeType.EXACT_INPUT));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),e.exactOut=function(){var n=g(w.mark((function n(i,r){return w.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e.fromRoute(i,r,t.TradeType.EXACT_OUTPUT));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),e.fromRoute=function(){var n=g(w.mark((function n(r,a,o){var u,s,c,m,p,l,d;return w.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(u=new Array(r.tokenPath.length),o!==t.TradeType.EXACT_INPUT){n.next=19;break}a.currency.equals(r.input)||i(!1),u[0]=a.wrapped,m=0;case 5:if(!(m<r.tokenPath.length-1)){n.next=15;break}return p=r.pools[m],n.next=9,p.getOutputAmount(u[m]);case 9:u[m+1]=n.sent[0];case 12:m++,n.next=5;break;case 15:s=t.CurrencyAmount.fromFractionalAmount(r.input,a.numerator,a.denominator),c=t.CurrencyAmount.fromFractionalAmount(r.output,u[u.length-1].numerator,u[u.length-1].denominator),n.next=34;break;case 19:a.currency.equals(r.output)||i(!1),u[u.length-1]=a.wrapped,l=r.tokenPath.length-1;case 22:if(!(l>0)){n.next=32;break}return d=r.pools[l-1],n.next=26,d.getInputAmount(u[l]);case 26:u[l-1]=n.sent[0];case 29:l--,n.next=22;break;case 32:s=t.CurrencyAmount.fromFractionalAmount(r.input,u[0].numerator,u[0].denominator),c=t.CurrencyAmount.fromFractionalAmount(r.output,a.numerator,a.denominator);case 34:return n.abrupt("return",new e({routes:[{inputAmount:s,outputAmount:c,route:r}],tradeType:o}));case 35:case"end":return n.stop()}}),n)})));return function(e,t,i){return n.apply(this,arguments)}}(),e.fromRoutes=function(){var n=g(w.mark((function n(r,a){var o,u,s,c,m,p,l,d,f,g,y,h,k;return w.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=[],u=S(r);case 2:if((s=u()).done){n.next=43;break}if(m=(c=s.value).route,p=c.amount,l=new Array(m.tokenPath.length),d=void 0,f=void 0,a!==t.TradeType.EXACT_INPUT){n.next=25;break}p.currency.equals(m.input)||i(!1),d=t.CurrencyAmount.fromFractionalAmount(m.input,p.numerator,p.denominator),l[0]=t.CurrencyAmount.fromFractionalAmount(m.input.wrapped,p.numerator,p.denominator),g=0;case 12:if(!(g<m.tokenPath.length-1)){n.next=22;break}return y=m.pools[g],n.next=16,y.getOutputAmount(l[g]);case 16:l[g+1]=n.sent[0];case 19:g++,n.next=12;break;case 22:f=t.CurrencyAmount.fromFractionalAmount(m.output,l[l.length-1].numerator,l[l.length-1].denominator),n.next=40;break;case 25:p.currency.equals(m.output)||i(!1),f=t.CurrencyAmount.fromFractionalAmount(m.output,p.numerator,p.denominator),l[l.length-1]=t.CurrencyAmount.fromFractionalAmount(m.output.wrapped,p.numerator,p.denominator),h=m.tokenPath.length-1;case 29:if(!(h>0)){n.next=39;break}return k=m.pools[h-1],n.next=33,k.getInputAmount(l[h]);case 33:l[h-1]=n.sent[0];case 36:h--,n.next=29;break;case 39:d=t.CurrencyAmount.fromFractionalAmount(m.input,l[0].numerator,l[0].denominator);case 40:o.push({route:m,inputAmount:d,outputAmount:f});case 41:n.next=2;break;case 43:return n.abrupt("return",new e({routes:o,tradeType:a}));case 44:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),e.createUncheckedTrade=function(t){return new e(k({},t,{routes:[{inputAmount:t.inputAmount,outputAmount:t.outputAmount,route:t.route}]}))},e.createUncheckedTradeWithMultipleRoutes=function(t){return new e(t)};var n=e.prototype;return n.minimumAmountOut=function(e,n){if(void 0===n&&(n=this.outputAmount),e.lessThan("0")&&i(!1),this.tradeType===t.TradeType.EXACT_OUTPUT)return n;var r=new t.Fraction("1").add(e).invert().multiply(n.quotient).quotient;return t.CurrencyAmount.fromRawAmount(n.currency,r)},n.maximumAmountIn=function(e,n){if(void 0===n&&(n=this.inputAmount),e.lessThan("0")&&i(!1),this.tradeType===t.TradeType.EXACT_INPUT)return n;var r=new t.Fraction("1").add(e).multiply(n.quotient).quotient;return t.CurrencyAmount.fromRawAmount(n.currency,r)},n.worstExecutionPrice=function(e){return new t.Price(this.inputAmount.currency,this.outputAmount.currency,this.maximumAmountIn(e).quotient,this.minimumAmountOut(e).quotient)},e.bestTradeExactIn=function(){var n=g(w.mark((function n(r,a,o,u,s,c,m){var p,l,d,f,g,y,h,k,v,S,A;return w.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:d=void 0===(l=(p=void 0===u?{}:u).maxNumResults)?3:l,g=void 0===(f=p.maxHops)?3:f,void 0===s&&(s=[]),void 0===c&&(c=a),void 0===m&&(m=[]),r.length>0||i(!1),g>0||i(!1),a===c||s.length>0||i(!1),y=c.wrapped,h=o.wrapped,k=0;case 10:if(!(k<r.length)){n.next=46;break}if((v=r[k]).token0.equals(y.currency)||v.token1.equals(y.currency)){n.next=14;break}return n.abrupt("continue",43);case 14:return S=void 0,n.prev=15,n.next=19,v.getOutputAmount(y);case 19:S=n.sent[0],n.next=28;break;case 23:if(n.prev=23,n.t0=n.catch(15),!n.t0.isInsufficientInputAmountError){n.next=27;break}return n.abrupt("continue",43);case 27:throw n.t0;case 28:if(!S.currency.isToken||!S.currency.equals(h)){n.next=39;break}return n.t1=t.sortedInsert,n.t2=m,n.next=33,e.fromRoute(new he([].concat(s,[v]),a.currency,o),a,t.TradeType.EXACT_INPUT);case 33:n.t3=n.sent,n.t4=d,n.t5=ke,(0,n.t1)(n.t2,n.t3,n.t4,n.t5),n.next=43;break;case 39:if(!(g>1&&r.length>1)){n.next=43;break}return A=r.slice(0,k).concat(r.slice(k+1,r.length)),n.next=43,e.bestTradeExactIn(A,a,o,{maxNumResults:d,maxHops:g-1},[].concat(s,[v]),S,m);case 43:k++,n.next=10;break;case 46:return n.abrupt("return",m);case 47:case"end":return n.stop()}}),n,null,[[15,23]])})));return function(e,t,i,r,a,o,u){return n.apply(this,arguments)}}(),e.bestTradeExactOut=function(){var n=g(w.mark((function n(r,a,o,u,s,c,m){var p,l,d,f,g,y,h,k,v,S,A;return w.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:d=void 0===(l=(p=void 0===u?{}:u).maxNumResults)?3:l,g=void 0===(f=p.maxHops)?3:f,void 0===s&&(s=[]),void 0===c&&(c=o),void 0===m&&(m=[]),r.length>0||i(!1),g>0||i(!1),o===c||s.length>0||i(!1),y=c.wrapped,h=a.wrapped,k=0;case 10:if(!(k<r.length)){n.next=46;break}if((v=r[k]).token0.equals(y.currency)||v.token1.equals(y.currency)){n.next=14;break}return n.abrupt("continue",43);case 14:return S=void 0,n.prev=15,n.next=19,v.getInputAmount(y);case 19:S=n.sent[0],n.next=28;break;case 23:if(n.prev=23,n.t0=n.catch(15),!n.t0.isInsufficientReservesError){n.next=27;break}return n.abrupt("continue",43);case 27:throw n.t0;case 28:if(!S.currency.equals(h)){n.next=39;break}return n.t1=t.sortedInsert,n.t2=m,n.next=33,e.fromRoute(new he([v].concat(s),a,o.currency),o,t.TradeType.EXACT_OUTPUT);case 33:n.t3=n.sent,n.t4=d,n.t5=ke,(0,n.t1)(n.t2,n.t3,n.t4,n.t5),n.next=43;break;case 39:if(!(g>1&&r.length>1)){n.next=43;break}return A=r.slice(0,k).concat(r.slice(k+1,r.length)),n.next=43,e.bestTradeExactOut(A,a,o,{maxNumResults:d,maxHops:g-1},[v].concat(s),S,m);case 43:k++,n.next=10;break;case 46:return n.abrupt("return",m);case 47:case"end":return n.stop()}}),n,null,[[15,23]])})));return function(e,t,i,r,a,o,u){return n.apply(this,arguments)}}(),h(e,[{key:"route",get:function(){return 1!=this.swaps.length&&i(!1),this.swaps[0].route}},{key:"inputAmount",get:function(){if(this._inputAmount)return this._inputAmount;var e=this.swaps[0].inputAmount.currency,n=this.swaps.map((function(e){return e.inputAmount})).reduce((function(e,t){return e.add(t)}),t.CurrencyAmount.fromRawAmount(e,0));return this._inputAmount=n,this._inputAmount}},{key:"outputAmount",get:function(){if(this._outputAmount)return this._outputAmount;var e=this.swaps[0].outputAmount.currency,n=this.swaps.map((function(e){return e.outputAmount})).reduce((function(e,t){return e.add(t)}),t.CurrencyAmount.fromRawAmount(e,0));return this._outputAmount=n,this._outputAmount}},{key:"executionPrice",get:function(){var e;return null!=(e=this._executionPrice)?e:this._executionPrice=new t.Price(this.inputAmount.currency,this.outputAmount.currency,this.inputAmount.quotient,this.outputAmount.quotient)}},{key:"priceImpact",get:function(){if(this._priceImpact)return this._priceImpact;for(var e,n=t.CurrencyAmount.fromRawAmount(this.outputAmount.currency,0),i=S(this.swaps);!(e=i()).done;){var r=e.value;n=n.add(r.route.midPrice.quote(r.inputAmount))}var a=n.subtract(this.outputAmount).divide(n);return this._priceImpact=new t.Percent(a.numerator,a.denominator),this._priceImpact}}]),e}();function Se(e){return e.bitLength()-1}function Ae(e){return e.zeroBits()}var xe=function(){function e(){}return e.encodeMulticall=function(t){return Array.isArray(t)||(t=[t]),1===t.length?t[0]:e.INTERFACE.encodeFunctionData("multicall",[t])},e}();xe.INTERFACE=new o.Interface(u.abi);var Te=function(){function e(){}return e.encodePermit=function(t,n){return"nonce"in n?e.INTERFACE.encodeFunctionData("selfPermitAllowed",[t.address,ee(n.nonce),ee(n.expiry),n.v,n.r,n.s]):e.INTERFACE.encodeFunctionData("selfPermit",[t.address,ee(n.amount),ee(n.deadline),n.v,n.r,n.s])},e}();Te.INTERFACE=new o.Interface(c.abi);var we=function(){function e(){}return e.encodeFeeBips=function(e){return ee(e.multiply(1e4).quotient)},e.encodeUnwrapWETH9=function(n,i,r){if(i=t.validateAndParseAddress(i),r){var a=this.encodeFeeBips(r.fee),o=t.validateAndParseAddress(r.recipient);return e.INTERFACE.encodeFunctionData("unwrapWETH9WithFee",[ee(n),i,a,o])}return e.INTERFACE.encodeFunctionData("unwrapWETH9",[ee(n),i])},e.encodeSweepToken=function(n,i,r,a){if(r=t.validateAndParseAddress(r),a){var o=this.encodeFeeBips(a.fee),u=t.validateAndParseAddress(a.recipient);return e.INTERFACE.encodeFunctionData("sweepTokenWithFee",[n.address,ee(i),r,o,u])}return e.INTERFACE.encodeFunctionData("sweepToken",[n.address,ee(i),r])},e.encodeRefundETH=function(){return e.INTERFACE.encodeFunctionData("refundETH")},e}();we.INTERFACE=new o.Interface(m.abi);var Me=["expectedCurrencyOwed0","expectedCurrencyOwed1"],Ie=ee(n.subtract(n.exponentiate(n.BigInt(2),n.BigInt(128)),n.BigInt(1)));function be(e){return Object.keys(e).some((function(e){return"recipient"===e}))}var qe=function(){function e(){}return e.encodeCreate=function(t){return e.INTERFACE.encodeFunctionData("createAndInitializePoolIfNecessary",[t.token0.address,t.token1.address,t.fee,ee(t.sqrtRatioX32)])},e.createCallParameters=function(e){return{calldata:this.encodeCreate(e),value:ee(0)}},e.addCallParameters=function(r,a){n.greaterThan(r.liquidity,q)||i(!1);var o=[],u=r.mintAmounts,s=u.amount0,c=u.amount1,m=r.mintAmountsWithSlippage(a.slippageTolerance),p=ee(m.amount0),l=ee(m.amount1),d=ee(a.deadline);if(be(a)&&a.createPool&&o.push(this.encodeCreate(r.pool)),a.token0Permit&&o.push(Te.encodePermit(r.pool.token0,a.token0Permit)),a.token1Permit&&o.push(Te.encodePermit(r.pool.token1,a.token1Permit)),be(a)){var f=t.validateAndParseAddress(a.recipient);o.push(e.INTERFACE.encodeFunctionData("mint",[{token0:r.pool.token0.address,token1:r.pool.token1.address,fee:r.pool.fee,tickLower:r.tickLower,tickUpper:r.tickUpper,amount0Desired:ee(s),amount1Desired:ee(c),amount0Min:p,amount1Min:l,recipient:f,deadline:d}]))}else o.push(e.INTERFACE.encodeFunctionData("increaseLiquidity",[{tokenId:ee(a.tokenId),amount0Desired:ee(s),amount1Desired:ee(c),amount0Min:p,amount1Min:l,deadline:d}]));var g=ee(0);if(a.useNative){var y=a.useNative.wrapped;r.pool.token0.equals(y)||r.pool.token1.equals(y)||i(!1);var h=r.pool.token0.equals(y)?s:c;n.greaterThan(h,q)&&o.push(we.encodeRefundETH()),g=ee(h)}return{calldata:xe.encodeMulticall(o),value:g}},e.encodeCollect=function(n){var i=[],r=ee(n.tokenId),a=n.expectedCurrencyOwed0.currency.isNative||n.expectedCurrencyOwed1.currency.isNative,o=t.validateAndParseAddress(n.recipient);if(i.push(e.INTERFACE.encodeFunctionData("collect",[{tokenId:r,recipient:a?M:o,amount0Max:Ie,amount1Max:Ie}])),a){var u=n.expectedCurrencyOwed0.currency.isNative?n.expectedCurrencyOwed1.currency:n.expectedCurrencyOwed0.currency,s=n.expectedCurrencyOwed0.currency.isNative?n.expectedCurrencyOwed1.quotient:n.expectedCurrencyOwed0.quotient;i.push(we.encodeUnwrapWETH9(n.expectedCurrencyOwed0.currency.isNative?n.expectedCurrencyOwed0.quotient:n.expectedCurrencyOwed1.quotient,o)),i.push(we.encodeSweepToken(u,s,o))}return i},e.collectCallParameters=function(t){var n=e.encodeCollect(t);return{calldata:xe.encodeMulticall(n),value:ee(0)}},e.removeCallParameters=function(r,a){var o=[],u=ee(a.deadline),s=ee(a.tokenId),c=new ye({pool:r.pool,liquidity:a.liquidityPercentage.multiply(r.liquidity).quotient,tickLower:r.tickLower,tickUpper:r.tickUpper});n.greaterThan(c.liquidity,q)||i(!1);var m=c.burnAmountsWithSlippage(a.slippageTolerance),p=m.amount0,l=m.amount1;a.permit&&o.push(e.INTERFACE.encodeFunctionData("permit",[t.validateAndParseAddress(a.permit.spender),s,ee(a.permit.deadline),a.permit.v,a.permit.r,a.permit.s])),o.push(e.INTERFACE.encodeFunctionData("decreaseLiquidity",[{tokenId:s,liquidity:ee(c.liquidity),amount0Min:ee(p),amount1Min:ee(l),deadline:u}]));var d=a.collectOptions,f=d.expectedCurrencyOwed0,g=d.expectedCurrencyOwed1,y=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)t.indexOf(n=a[i])>=0||(r[n]=e[n]);return r}(d,Me);return o.push.apply(o,e.encodeCollect(k({tokenId:ee(a.tokenId),expectedCurrencyOwed0:f.add(t.CurrencyAmount.fromRawAmount(f.currency,p)),expectedCurrencyOwed1:g.add(t.CurrencyAmount.fromRawAmount(g.currency,l))},y))),a.liquidityPercentage.equalTo(P)?a.burnToken&&o.push(e.INTERFACE.encodeFunctionData("burn",[s])):!0===a.burnToken&&i(!1),{calldata:xe.encodeMulticall(o),value:ee(0)}},e.safeTransferFromParameters=function(n){var i=t.validateAndParseAddress(n.recipient),r=t.validateAndParseAddress(n.sender);return{calldata:n.data?e.INTERFACE.encodeFunctionData("safeTransferFrom(address,address,uint256,bytes)",[r,i,ee(n.tokenId),n.data]):e.INTERFACE.encodeFunctionData("safeTransferFrom(address,address,uint256)",[r,i,ee(n.tokenId)]),value:ee(0)}},e}();qe.INTERFACE=new o.Interface(s.abi);var Pe=function(){function e(){}return e.quoteCallParameters=function(n,r,a,o){void 0===o&&(o={});var u,s=1===n.pools.length,c=ee(r.quotient);if(s){var m,p,l,d;u=a===t.TradeType.EXACT_INPUT?e.INTERFACE.encodeFunctionData("quoteExactInputSingle",[n.tokenPath[0].address,n.tokenPath[1].address,n.pools[0].fee,c,ee(null!=(m=null==(p=o)?void 0:p.sqrtPriceLimitX96)?m:0)]):e.INTERFACE.encodeFunctionData("quoteExactOutputSingle",[n.tokenPath[0].address,n.tokenPath[1].address,n.pools[0].fee,c,ee(null!=(l=null==(d=o)?void 0:d.sqrtPriceLimitX96)?l:0)])}else{var f;void 0!==(null==(f=o)?void 0:f.sqrtPriceLimitX96)&&i(!1);var g=te(n,a===t.TradeType.EXACT_OUTPUT);u=e.INTERFACE.encodeFunctionData(a===t.TradeType.EXACT_INPUT?"quoteExactInput":"quoteExactOutput",[g,c])}return{calldata:u,value:ee(0)}},e}();Pe.INTERFACE=new o.Interface(p.abi);var Ee=function(){function e(){}return e.encodeClaim=function(n,i){var r,a=[];a.push(e.INTERFACE.encodeFunctionData("unstakeToken",[this._encodeIncentiveKey(n),ee(i.tokenId)]));var o=t.validateAndParseAddress(i.recipient),u=null!=(r=i.amount)?r:0;return a.push(e.INTERFACE.encodeFunctionData("claimReward",[n.rewardToken.address,o,ee(u)])),a},e.collectRewards=function(t,n){t=Array.isArray(t)?t:[t];for(var i=[],r=0;r<t.length;r++){var a=t[r];(i=i.concat(this.encodeClaim(a,n))).push(e.INTERFACE.encodeFunctionData("stakeToken",[this._encodeIncentiveKey(a),ee(n.tokenId)]))}return{calldata:xe.encodeMulticall(i),value:ee(0)}},e.withdrawToken=function(n,i){var r=[];n=Array.isArray(n)?n:[n];for(var a={tokenId:i.tokenId,recipient:i.recipient,amount:i.amount},o=0;o<n.length;o++)r=r.concat(this.encodeClaim(n[o],a));var u=t.validateAndParseAddress(i.owner);return r.push(e.INTERFACE.encodeFunctionData("withdrawToken",[ee(i.tokenId),u,i.data?i.data:ee(0)])),{calldata:xe.encodeMulticall(r),value:ee(0)}},e.encodeDeposit=function(t){var n;if((t=Array.isArray(t)?t:[t]).length>1){for(var i=[],r=0;r<t.length;r++)i.push(this._encodeIncentiveKey(t[r]));n=o.defaultAbiCoder.encode([e.INCENTIVE_KEY_ABI+"[]"],[i])}else n=o.defaultAbiCoder.encode([e.INCENTIVE_KEY_ABI],[this._encodeIncentiveKey(t[0])]);return n},e._encodeIncentiveKey=function(e){var n=e.pool,i=n.token0,r=n.token1,a=n.fee,o=t.validateAndParseAddress(e.refundee);return{rewardToken:e.rewardToken.address,pool:$.getAddress(i,r,a),startTime:ee(e.startTime),endTime:ee(e.endTime),refundee:o}},e}();Ee.INTERFACE=new o.Interface(l.abi),Ee.INCENTIVE_KEY_ABI="tuple(address rewardToken, address pool, uint256 startTime, uint256 endTime, address refundee)";var Re=function(){function e(){}return e.swapCallParameters=function(n,r){Array.isArray(n)||(n=[n]);var a=n[0],o=a.inputAmount.currency.wrapped,u=a.outputAmount.currency.wrapped;n.every((function(e){return e.inputAmount.currency.wrapped.equals(o)}))||i(!1),n.every((function(e){return e.outputAmount.currency.wrapped.equals(u)}))||i(!1);var s=[],c=t.CurrencyAmount.fromRawAmount(n[0].inputAmount.currency,0),m=t.CurrencyAmount.fromRawAmount(n[0].outputAmount.currency,0),p=n.reduce((function(e,t){return e.add(t.minimumAmountOut(r.slippageTolerance))}),m),l=a.inputAmount.currency.isNative&&a.tradeType===t.TradeType.EXACT_OUTPUT,d=a.outputAmount.currency.isNative,f=d||!!r.fee,g=a.inputAmount.currency.isNative?n.reduce((function(e,t){return e.add(t.maximumAmountIn(r.slippageTolerance))}),c):c;r.inputTokenPermit&&(a.inputAmount.currency.isToken||i(!1),s.push(Te.encodePermit(a.inputAmount.currency,r.inputTokenPermit)));for(var y,h=t.validateAndParseAddress(r.recipient),k=ee(r.deadline),v=S(n);!(y=v()).done;)for(var A,x=y.value,T=S(x.swaps);!(A=T()).done;){var w=A.value,I=w.route,b=w.outputAmount,q=ee(x.maximumAmountIn(r.slippageTolerance,w.inputAmount).quotient),P=ee(x.minimumAmountOut(r.slippageTolerance,b).quotient);if(1===I.pools.length)if(x.tradeType===t.TradeType.EXACT_INPUT){var E,R={tokenIn:I.tokenPath[0].address,tokenOut:I.tokenPath[1].address,fee:I.pools[0].fee,recipient:f?M:h,deadline:k,amountIn:q,amountOutMinimum:P,sqrtPriceLimitX96:ee(null!=(E=r.sqrtPriceLimitX96)?E:0)};s.push(e.INTERFACE.encodeFunctionData("exactInputSingle",[R]))}else{var C,O={tokenIn:I.tokenPath[0].address,tokenOut:I.tokenPath[1].address,fee:I.pools[0].fee,recipient:f?M:h,deadline:k,amountOut:P,amountInMaximum:q,sqrtPriceLimitX96:ee(null!=(C=r.sqrtPriceLimitX96)?C:0)};s.push(e.INTERFACE.encodeFunctionData("exactOutputSingle",[O]))}else{void 0!==r.sqrtPriceLimitX96&&i(!1);var N=te(I,x.tradeType===t.TradeType.EXACT_OUTPUT);s.push(x.tradeType===t.TradeType.EXACT_INPUT?e.INTERFACE.encodeFunctionData("exactInput",[{path:N,recipient:f?M:h,deadline:k,amountIn:q,amountOutMinimum:P}]):e.INTERFACE.encodeFunctionData("exactOutput",[{path:N,recipient:f?M:h,deadline:k,amountOut:P,amountInMaximum:q}]))}}return f&&s.push(r.fee?d?we.encodeUnwrapWETH9(p.quotient,h,r.fee):we.encodeSweepToken(a.outputAmount.currency.wrapped,p.quotient,h,r.fee):we.encodeUnwrapWETH9(p.quotient,h)),l&&s.push(we.encodeRefundETH()),{calldata:xe.encodeMulticall(s),value:ee(g.quotient)}},e}();Re.INTERFACE=new o.Interface(d.abi),exports.ADDRESS_ZERO=M,exports.BITMAP_SEED=ue,exports.FACTORY_ADDRESS="0x1F98431c8aD98523631AE4a59f267346ea31F984",exports.FEE_SEED=le,exports.FullMath=X,exports.IDL={version:"0.1.0",name:"cyclos_core",instructions:[{name:"initFactory",accounts:[{name:"owner",isMut:!0,isSigner:!0},{name:"factoryState",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"setOwner",accounts:[{name:"owner",isMut:!1,isSigner:!0},{name:"newOwner",isMut:!1,isSigner:!1},{name:"factoryState",isMut:!0,isSigner:!1}],args:[]},{name:"enableFeeAmount",accounts:[{name:"owner",isMut:!0,isSigner:!0},{name:"factoryState",isMut:!0,isSigner:!1},{name:"feeState",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"fee",type:"u32"},{name:"tickSpacing",type:"u16"}]},{name:"createAndInitPool",accounts:[{name:"poolCreator",isMut:!0,isSigner:!0},{name:"token0",isMut:!1,isSigner:!1},{name:"token1",isMut:!1,isSigner:!1},{name:"feeState",isMut:!1,isSigner:!1},{name:"poolState",isMut:!0,isSigner:!1},{name:"initialObservationState",isMut:!0,isSigner:!1},{name:"vault0",isMut:!0,isSigner:!1},{name:"vault1",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1}],args:[{name:"sqrtPriceX32",type:"u64"}]},{name:"increaseObservationCardinalityNext",accounts:[{name:"payer",isMut:!1,isSigner:!0},{name:"poolState",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"observationAccountBumps",type:"bytes"}]},{name:"setFeeProtocol",accounts:[{name:"owner",isMut:!1,isSigner:!0},{name:"factoryState",isMut:!0,isSigner:!1}],args:[{name:"feeProtocol",type:"u8"}]},{name:"collectProtocol",accounts:[{name:"owner",isMut:!1,isSigner:!0},{name:"factoryState",isMut:!0,isSigner:!1},{name:"poolState",isMut:!0,isSigner:!1},{name:"vault0",isMut:!0,isSigner:!1},{name:"vault1",isMut:!0,isSigner:!1},{name:"recipientWallet0",isMut:!0,isSigner:!1},{name:"recipientWallet1",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"amount0Requested",type:"u64"},{name:"amount1Requested",type:"u64"}]},{name:"initTickAccount",accounts:[{name:"signer",isMut:!0,isSigner:!0},{name:"poolState",isMut:!1,isSigner:!1},{name:"tickState",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"tick",type:"i32"}]},{name:"closeTickAccount",accounts:[{name:"tickState",isMut:!0,isSigner:!1},{name:"recipient",isMut:!0,isSigner:!1}],args:[]},{name:"initBitmapAccount",accounts:[{name:"signer",isMut:!0,isSigner:!0},{name:"poolState",isMut:!1,isSigner:!1},{name:"bitmapState",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"wordPos",type:"i16"}]},{name:"initPositionAccount",accounts:[{name:"signer",isMut:!0,isSigner:!0},{name:"recipient",isMut:!1,isSigner:!1},{name:"poolState",isMut:!1,isSigner:!1},{name:"tickLowerState",isMut:!1,isSigner:!1},{name:"tickUpperState",isMut:!1,isSigner:!1},{name:"positionState",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"mintCallback",accounts:[{name:"minter",isMut:!1,isSigner:!0},{name:"tokenAccount0",isMut:!1,isSigner:!1},{name:"tokenAccount1",isMut:!1,isSigner:!1},{name:"vault0",isMut:!1,isSigner:!1},{name:"vault1",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"amount0Owed",type:"u64"},{name:"amount1Owed",type:"u64"}]},{name:"swapCallback",accounts:[{name:"signer",isMut:!1,isSigner:!0},{name:"inputTokenAccount",isMut:!0,isSigner:!1},{name:"outputTokenAccount",isMut:!0,isSigner:!1},{name:"inputVault",isMut:!0,isSigner:!1},{name:"outputVault",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"amount0Delta",type:"i64"},{name:"amount1Delta",type:"i64"}]},{name:"mint",accounts:[{name:"minter",isMut:!0,isSigner:!0},{name:"tokenAccount0",isMut:!0,isSigner:!1},{name:"tokenAccount1",isMut:!0,isSigner:!1},{name:"vault0",isMut:!0,isSigner:!1},{name:"vault1",isMut:!0,isSigner:!1},{name:"recipient",isMut:!1,isSigner:!1},{name:"poolState",isMut:!0,isSigner:!1},{name:"tickLowerState",isMut:!0,isSigner:!1},{name:"tickUpperState",isMut:!0,isSigner:!1},{name:"bitmapLowerState",isMut:!0,isSigner:!1},{name:"bitmapUpperState",isMut:!0,isSigner:!1},{name:"positionState",isMut:!0,isSigner:!1},{name:"lastObservationState",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"callbackHandler",isMut:!1,isSigner:!1}],args:[{name:"amount",type:"u64"}]},{name:"burn",accounts:[{name:"owner",isMut:!1,isSigner:!0},{name:"poolState",isMut:!0,isSigner:!1},{name:"tickLowerState",isMut:!1,isSigner:!1},{name:"tickUpperState",isMut:!1,isSigner:!1},{name:"bitmapLowerState",isMut:!1,isSigner:!1},{name:"bitmapUpperState",isMut:!1,isSigner:!1},{name:"positionState",isMut:!0,isSigner:!1},{name:"lastObservationState",isMut:!1,isSigner:!1}],args:[{name:"amount",type:"u64"}]},{name:"collect",accounts:[{name:"owner",isMut:!1,isSigner:!0},{name:"poolState",isMut:!0,isSigner:!1},{name:"tickLowerState",isMut:!1,isSigner:!1},{name:"tickUpperState",isMut:!1,isSigner:!1},{name:"positionState",isMut:!0,isSigner:!1},{name:"vault0",isMut:!0,isSigner:!1},{name:"vault1",isMut:!0,isSigner:!1},{name:"recipientWallet0",isMut:!0,isSigner:!1},{name:"recipientWallet1",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"amount0Requested",type:"u64"},{name:"amount1Requested",type:"u64"}]},{name:"swap",accounts:[{name:"signer",isMut:!1,isSigner:!0},{name:"inputTokenAccount",isMut:!0,isSigner:!1},{name:"outputTokenAccount",isMut:!0,isSigner:!1},{name:"inputVault",isMut:!0,isSigner:!1},{name:"outputVault",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"factoryState",isMut:!1,isSigner:!1},{name:"poolState",isMut:!0,isSigner:!1},{name:"lastObservationState",isMut:!0,isSigner:!1},{name:"callbackHandler",isMut:!1,isSigner:!1}],args:[{name:"amountSpecified",type:"i64"},{name:"sqrtPriceLimitX32",type:"u64"}]},{name:"mintTokenizedPosition",accounts:[{name:"minter",isMut:!0,isSigner:!0},{name:"recipient",isMut:!1,isSigner:!1},{name:"factoryState",isMut:!1,isSigner:!1},{name:"nftMint",isMut:!0,isSigner:!0},{name:"nftAccount",isMut:!0,isSigner:!1},{name:"poolState",isMut:!0,isSigner:!1},{name:"corePositionState",isMut:!0,isSigner:!1},{name:"tickLowerState",isMut:!0,isSigner:!1},{name:"tickUpperState",isMut:!0,isSigner:!1},{name:"bitmapLowerState",isMut:!0,isSigner:!1},{name:"bitmapUpperState",isMut:!0,isSigner:!1},{name:"tokenizedPositionState",isMut:!0,isSigner:!1},{name:"tokenAccount0",isMut:!0,isSigner:!1},{name:"tokenAccount1",isMut:!0,isSigner:!1},{name:"vault0",isMut:!0,isSigner:!1},{name:"vault1",isMut:!0,isSigner:!1},{name:"lastObservationState",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"coreProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1}],args:[{name:"amount0Desired",type:"u64"},{name:"amount1Desired",type:"u64"},{name:"amount0Min",type:"u64"},{name:"amount1Min",type:"u64"},{name:"deadline",type:"i64"}]},{name:"addMetaplexMetadata",accounts:[{name:"payer",isMut:!0,isSigner:!0},{name:"factoryState",isMut:!1,isSigner:!1},{name:"nftMint",isMut:!0,isSigner:!1},{name:"tokenizedPositionState",isMut:!1,isSigner:!1},{name:"metadataAccount",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"metadataProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"increaseLiquidity",accounts:[{name:"payer",isMut:!0,isSigner:!0},{name:"factoryState",isMut:!1,isSigner:!1},{name:"tokenizedPositionState",isMut:!0,isSigner:!1},{name:"poolState",isMut:!0,isSigner:!1},{name:"corePositionState",isMut:!0,isSigner:!1},{name:"tickLowerState",isMut:!0,isSigner:!1},{name:"tickUpperState",isMut:!0,isSigner:!1},{name:"bitmapLowerState",isMut:!0,isSigner:!1},{name:"bitmapUpperState",isMut:!0,isSigner:!1},{name:"tokenAccount0",isMut:!0,isSigner:!1},{name:"tokenAccount1",isMut:!0,isSigner:!1},{name:"vault0",isMut:!0,isSigner:!1},{name:"vault1",isMut:!0,isSigner:!1},{name:"lastObservationState",isMut:!0,isSigner:!1},{name:"coreProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"amount0Desired",type:"u64"},{name:"amount1Desired",type:"u64"},{name:"amount0Min",type:"u64"},{name:"amount1Min",type:"u64"},{name:"deadline",type:"i64"}]},{name:"decreaseLiquidity",accounts:[{name:"ownerOrDelegate",isMut:!0,isSigner:!0},{name:"nftAccount",isMut:!1,isSigner:!1},{name:"tokenizedPositionState",isMut:!0,isSigner:!1},{name:"factoryState",isMut:!1,isSigner:!1},{name:"poolState",isMut:!0,isSigner:!1},{name:"corePositionState",isMut:!0,isSigner:!1},{name:"tickLowerState",isMut:!0,isSigner:!1},{name:"tickUpperState",isMut:!0,isSigner:!1},{name:"bitmapLowerState",isMut:!0,isSigner:!1},{name:"bitmapUpperState",isMut:!0,isSigner:!1},{name:"lastObservationState",isMut:!0,isSigner:!1},{name:"coreProgram",isMut:!1,isSigner:!1}],args:[{name:"liquidity",type:"u64"},{name:"amount0Min",type:"u64"},{name:"amount1Min",type:"u64"},{name:"deadline",type:"i64"}]},{name:"collectFromTokenized",accounts:[{name:"ownerOrDelegate",isMut:!0,isSigner:!0},{name:"nftAccount",isMut:!1,isSigner:!1},{name:"tokenizedPositionState",isMut:!0,isSigner:!1},{name:"factoryState",isMut:!1,isSigner:!1},{name:"poolState",isMut:!0,isSigner:!1},{name:"corePositionState",isMut:!0,isSigner:!1},{name:"tickLowerState",isMut:!0,isSigner:!1},{name:"tickUpperState",isMut:!0,isSigner:!1},{name:"bitmapLowerState",isMut:!0,isSigner:!1},{name:"bitmapUpperState",isMut:!0,isSigner:!1},{name:"lastObservationState",isMut:!0,isSigner:!1},{name:"vault0",isMut:!0,isSigner:!1},{name:"vault1",isMut:!0,isSigner:!1},{name:"recipientWallet0",isMut:!0,isSigner:!1},{name:"recipientWallet1",isMut:!0,isSigner:!1},{name:"coreProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"amount0Max",type:"u64"},{name:"amount1Max",type:"u64"}]},{name:"exactInputSingle",accounts:[{name:"signer",isMut:!0,isSigner:!0},{name:"factoryState",isMut:!1,isSigner:!1},{name:"poolState",isMut:!0,isSigner:!1},{name:"inputTokenAccount",isMut:!0,isSigner:!1},{name:"outputTokenAccount",isMut:!0,isSigner:!1},{name:"inputVault",isMut:!0,isSigner:!1},{name:"outputVault",isMut:!0,isSigner:!1},{name:"lastObservationState",isMut:!0,isSigner:!1},{name:"coreProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"deadline",type:"i64"},{name:"amountIn",type:"u64"},{name:"amountOutMinimum",type:"u64"},{name:"sqrtPriceLimitX32",type:"u64"}]},{name:"exactInput",accounts:[{name:"signer",isMut:!0,isSigner:!0},{name:"factoryState",isMut:!1,isSigner:!1},{name:"inputTokenAccount",isMut:!0,isSigner:!1},{name:"coreProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"deadline",type:"i64"},{name:"amountIn",type:"u64"},{name:"amountOutMinimum",type:"u64"},{name:"additionalAccountsPerPool",type:"bytes"}]}],accounts:[{name:"factoryState",type:{kind:"struct",fields:[{name:"bump",type:"u8"},{name:"owner",type:"publicKey"},{name:"feeProtocol",type:"u8"}]}},{name:"feeState",type:{kind:"struct",fields:[{name:"bump",type:"u8"},{name:"fee",type:"u32"},{name:"tickSpacing",type:"u16"}]}},{name:"observationState",type:{kind:"struct",fields:[{name:"bump",type:"u8"},{name:"index",type:"u16"},{name:"blockTimestamp",type:"u32"},{name:"tickCumulative",type:"i64"},{name:"secondsPerLiquidityCumulativeX32",type:"u64"},{name:"initialized",type:"bool"}]}},{name:"poolState",type:{kind:"struct",fields:[{name:"bump",type:"u8"},{name:"token0",type:"publicKey"},{name:"token1",type:"publicKey"},{name:"fee",type:"u32"},{name:"tickSpacing",type:"u16"},{name:"liquidity",type:"u64"},{name:"sqrtPriceX32",type:"u64"},{name:"tick",type:"i32"},{name:"observationIndex",type:"u16"},{name:"observationCardinality",type:"u16"},{name:"observationCardinalityNext",type:"u16"},{name:"feeGrowthGlobal0X32",type:"u64"},{name:"feeGrowthGlobal1X32",type:"u64"},{name:"protocolFeesToken0",type:"u64"},{name:"protocolFeesToken1",type:"u64"},{name:"unlocked",type:"bool"}]}},{name:"positionState",type:{kind:"struct",fields:[{name:"bump",type:"u8"},{name:"liquidity",type:"u64"},{name:"feeGrowthInside0LastX32",type:"u64"},{name:"feeGrowthInside1LastX32",type:"u64"},{name:"tokensOwed0",type:"u64"},{name:"tokensOwed1",type:"u64"}]}},{name:"positionManagerState",type:{kind:"struct",fields:[{name:"bump",type:"u8"}]}},{name:"swapRouterState",type:{kind:"struct",fields:[{name:"bump",type:"u8"},{name:"core",type:"publicKey"},{name:"amountInCached",type:"u64"}]}},{name:"tickState",type:{kind:"struct",fields:[{name:"bump",type:"u8"},{name:"tick",type:"i32"},{name:"liquidityNet",type:"i64"},{name:"liquidityGross",type:"u64"},{name:"feeGrowthOutside0X32",type:"u64"},{name:"feeGrowthOutside1X32",type:"u64"},{name:"tickCumulativeOutside",type:"i64"},{name:"secondsPerLiquidityOutsideX32",type:"u64"},{name:"secondsOutside",type:"u32"}]}},{name:"tickBitmapState",type:{kind:"struct",fields:[{name:"bump",type:"u8"},{name:"wordPos",type:"i16"},{name:"word",type:{array:["u64",4]}}]}},{name:"tokenizedPositionState",type:{kind:"struct",fields:[{name:"bump",type:"u8"},{name:"mint",type:"publicKey"},{name:"poolId",type:"publicKey"},{name:"tickLower",type:"i32"},{name:"tickUpper",type:"i32"},{name:"liquidity",type:"u64"},{name:"feeGrowthInside0LastX32",type:"u64"},{name:"feeGrowthInside1LastX32",type:"u64"},{name:"tokensOwed0",type:"u64"},{name:"tokensOwed1",type:"u64"}]}}],events:[{name:"OwnerChanged",fields:[{name:"oldOwner",type:"publicKey",index:!1},{name:"newOwner",type:"publicKey",index:!1}]},{name:"SetFeeProtocolEvent",fields:[{name:"feeProtocolOld",type:"u8",index:!1},{name:"feeProtocol",type:"u8",index:!1}]},{name:"FeeAmountEnabled",fields:[{name:"fee",type:"u32",index:!1},{name:"tickSpacing",type:"u16",index:!1}]},{name:"IncreaseObservationCardinalityNext",fields:[{name:"observationCardinalityNextOld",type:"u16",index:!1},{name:"observationCardinalityNextNew",type:"u16",index:!1}]},{name:"PoolCreatedAndInitialized",fields:[{name:"token0",type:"publicKey",index:!1},{name:"token1",type:"publicKey",index:!1},{name:"fee",type:"u32",index:!1},{name:"tickSpacing",type:"u16",index:!1},{name:"poolState",type:"publicKey",index:!1},{name:"sqrtPriceX32",type:"u64",index:!1},{name:"tick",type:"i32",index:!1}]},{name:"CollectProtocolEvent",fields:[{name:"poolState",type:"publicKey",index:!1},{name:"sender",type:"publicKey",index:!1},{name:"recipientWallet0",type:"publicKey",index:!1},{name:"recipientWallet1",type:"publicKey",index:!1},{name:"amount0",type:"u64",index:!1},{name:"amount1",type:"u64",index:!1}]},{name:"SwapEvent",fields:[{name:"poolState",type:"publicKey",index:!1},{name:"sender",type:"publicKey",index:!1},{name:"tokenAccount0",type:"publicKey",index:!1},{name:"tokenAccount1",type:"publicKey",index:!1},{name:"amount0",type:"i64",index:!1},{name:"amount1",type:"i64",index:!1},{name:"sqrtPriceX32",type:"u64",index:!1},{name:"liquidity",type:"u64",index:!1},{name:"tick",type:"i32",index:!1}]},{name:"MintEvent",fields:[{name:"poolState",type:"publicKey",index:!1},{name:"sender",type:"publicKey",index:!1},{name:"owner",type:"publicKey",index:!1},{name:"tickLower",type:"i32",index:!1},{name:"tickUpper",type:"i32",index:!1},{name:"amount",type:"u64",index:!1},{name:"amount0",type:"u64",index:!1},{name:"amount1",type:"u64",index:!1}]},{name:"BurnEvent",fields:[{name:"poolState",type:"publicKey",index:!1},{name:"owner",type:"publicKey",index:!1},{name:"tickLower",type:"i32",index:!1},{name:"tickUpper",type:"i32",index:!1},{name:"amount",type:"u64",index:!1},{name:"amount0",type:"u64",index:!1},{name:"amount1",type:"u64",index:!1}]},{name:"CollectEvent",fields:[{name:"poolState",type:"publicKey",index:!1},{name:"owner",type:"publicKey",index:!1},{name:"tickLower",type:"i32",index:!1},{name:"tickUpper",type:"i32",index:!1},{name:"amount0",type:"u64",index:!1},{name:"amount1",type:"u64",index:!1}]},{name:"IncreaseLiquidityEvent",fields:[{name:"tokenId",type:"publicKey",index:!1},{name:"liquidity",type:"u64",index:!1},{name:"amount0",type:"u64",index:!1},{name:"amount1",type:"u64",index:!1}]},{name:"DecreaseLiquidityEvent",fields:[{name:"tokenId",type:"publicKey",index:!1},{name:"liquidity",type:"u64",index:!1},{name:"amount0",type:"u64",index:!1},{name:"amount1",type:"u64",index:!1}]},{name:"CollectTokenizedEvent",fields:[{name:"tokenId",type:"publicKey",index:!1},{name:"recipientWallet0",type:"publicKey",index:!1},{name:"recipientWallet1",type:"publicKey",index:!1},{name:"amount0",type:"u64",index:!1},{name:"amount1",type:"u64",index:!1}]}],errors:[{code:6e3,name:"LOK",msg:"LOK"},{code:6001,name:"ZeroMintAmount",msg:"Minting amount should be greater than 0"},{code:6002,name:"TLU",msg:"TLU"},{code:6003,name:"TMS",msg:"TMS"},{code:6004,name:"TLM",msg:"TLM"},{code:6005,name:"TUM",msg:"TUM"},{code:6006,name:"M0",msg:"M0"},{code:6007,name:"M1",msg:"M1"},{code:6008,name:"OS",msg:"OS"},{code:6009,name:"AS",msg:"AS"},{code:6010,name:"SPL",msg:"SPL"},{code:6011,name:"IIA",msg:"IIA"},{code:6012,name:"NP",msg:"NP"},{code:6013,name:"LO",msg:"LO"},{code:6014,name:"R",msg:"R"},{code:6015,name:"T",msg:"T"},{code:6016,name:"LS",msg:"LS"},{code:6017,name:"LA",msg:"LA"},{code:6018,name:"TransactionTooOld",msg:"Transaction too old"},{code:6019,name:"PriceSlippageCheck",msg:"Price slippage check"},{code:6020,name:"NotApproved",msg:"Not approved"},{code:6021,name:"TooLittleReceived",msg:"Too little received"}]},exports.LOCAL_PROGRAM_ID="9qe9svzmigVAvWh2qX9AJq3p4N9QbTyx2yRCfN1aAZam",exports.LiquidityMath=U,exports.Multicall=xe,exports.NoTickDataProvider=Z,exports.NonfungiblePositionManager=qe,exports.OBSERVATION_SEED=me,exports.POOL_INIT_CODE_HASH="0xe34f199b19b2b4f47f68442619d555527d244f78a3297ea89325f843f87b8b54",exports.POOL_SEED=se,exports.POSITION_SEED=ce,exports.Payments=we,exports.Pool=$,exports.Position=ye,exports.Route=he,exports.SelfPermit=Te,exports.SqrtPriceMath=K,exports.Staker=Ee,exports.SwapMath=j,exports.SwapQuoter=Pe,exports.SwapRouter=Re,exports.TICK_SEED=pe,exports.TICK_SPACINGS=I,exports.Tick=function(e){var t=e.index,r=e.liquidityGross,a=e.liquidityNet;t>=Y.MIN_TICK&&t<=Y.MAX_TICK||i(!1),this.index=t,this.liquidityGross=n.BigInt(r),this.liquidityNet=n.BigInt(a)},exports.TickList=oe,exports.TickMath=Y,exports.Trade=ve,exports.computePoolAddress=D,exports.encodeRouteToPath=te,exports.encodeSqrtRatioX32=ne,exports.generateBitmapWord=function(e){return e[0].add(e[1].shln(64)).add(e[2].shln(126)).add(e[3].shln(192))},exports.i16ToSeed=function(e){var t=new ArrayBuffer(2);return new DataView(t).setInt16(0,e,!1),new Uint8Array(t)},exports.i32ToSeed=function(e){var t=new ArrayBuffer(4);return new DataView(t).setInt32(0,e,!1),new Uint8Array(t)},exports.isSorted=ie,exports.lsb=Ae,exports.maxLiquidityForAmounts=ge,exports.mostSignificantBit=H,exports.msb=Se,exports.nearestUsableTick=function(e,t){Number.isInteger(e)&&Number.isInteger(t)||i(!1),t>0||i(!1),e>=Y.MIN_TICK&&e<=Y.MAX_TICK||i(!1);var n=Math.round(e/t)*t;return n<Y.MIN_TICK?n+t:n>Y.MAX_TICK?n-t:n},exports.nextInitializedBit=function(e,t,n){if(n){var i=new r.BN(1).shln(t).subn(1).add(new r.BN(1).shln(t)),a=e.and(i),o=!a.eqn(0);return{next:o?Se(a):0,initialized:o}}var u=new r.BN(1).shln(t).subn(1).notn(256),s=e.and(u),c=!s.eqn(0);return{next:c?Ae(s):255,initialized:c}},exports.priceToClosestTick=function(e){var t=e.baseCurrency.sortsBefore(e.quoteCurrency),n=t?ne(e.numerator,e.denominator):ne(e.denominator,e.numerator),i=Y.getTickAtSqrtRatio(n),r=re(e.baseCurrency,e.quoteCurrency,i+1);return t?e.lessThan(r)||i++:e.greaterThan(r)||i++,i},exports.tickPosition=function(e){return{wordPos:e>>8,bitPos:e%256&255}},exports.tickToPrice=re,exports.toHex=ee,exports.tradeComparator=ke,exports.u16ToSeed=function(e){var t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e,!1),new Uint8Array(t)},exports.u32ToSeed=_;
//# sourceMappingURL=v3-sdk.cjs.production.min.js.map
